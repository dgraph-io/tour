+++
date = "2017-04-27T23:05:50+10:00"
next = "/schema/6"
prev = "/schema/4"
title = "Reverse edges"
weight = 5
course = 3
courseName = "Schema"
endpoint = "/alter"
+++

Edges are directional. A query can only follow an edge in the direction it was
created.

Two approaches let you query in both directions:

- **Define a separate reverse predicate and maintain it yourself.** Create a
  distinct predicate for the opposite direction (e.g., `employed_by` as the
  reverse of `works_for`). Every time you add `<person> <works_for> <company>`,
  you must also add `<company> <employed_by> <person>`. This gives you full
  control over naming and selective reversal, but demands discipline -- if you
  forget to add the reverse triple, the data becomes inconsistent.

- **Mark the predicate with `@reverse` and let Dgraph handle it.** Dgraph
  automatically creates and maintains the reverse edge for every triple on that
  predicate. You query the reverse with the `~` prefix: the reverse of
  `an_edge` is `~an_edge`.

Run this schema mutation to add `@reverse` to `boss_of` and `works_for`. Dgraph
will compute all reverse edges immediately.

Some predicates, such as `friend`, are inherently bidirectional and always
benefit from a reverse edge. Others, such as `boss_of`, point in only one
direction by design -- add a reverse edge only when the query pattern requires
it.
