+++
date = "2017-04-27T23:05:53+10:00"
next = "/schema/9"
prev = "/schema/7"
title = "Deleting Data"
weight = 8
course = 3
courseName = "Schema"
endpoint = "/mutate"
+++

A delete mutation supports three patterns:

- `<uid> <edge> <uid>/"value" .` Delete a single triple (S P O)
- `<uid> <edge> * .` Delete all values for a given predicate (S P *)
- `<uid> * * .` Delete all predicates for a given node (S * *)

{{% notice note %}}
The `S * *` pattern only deletes predicates that are defined in the node's
`dgraph.type`. Untyped predicates remain untouched. See the
[DQL Mutation docs](https://docs.dgraph.io/dql/dql-mutation/) for details.
{{% /notice %}}

The examples below use placeholder UIDs. Replace them with UIDs from your own
instance, then experiment freely.

You can express the same deletions in JSON format through the client libraries,
cURL, or Ratel UI.

#### See in JSON:

Delete all triples for a given node

```
 {
    "delete": [
        {
            "uid": "0xa"
        }
    ]
}
```

Delete all triples for a given edge

```
 {
    "delete": [
        {
            "uid": "0xa",
            "friends": null
        }
    ]
}
```

This deletes the edge between the two nodes but leaves the child node (the
"friend") intact.

Deleting relations and then their children

```
 {
    "delete": [
        {
            "uid": "0x2", # Answer UID.
            "comment": {
                "uid": "0x3" # Delete relation (edge) with the Comment
        }
        },
        {
            "uid": "0x3" # Delete the actual comment
        }
    ]
}
```

{{% notice tip %}} Comparing the JSON examples with the RDF patterns above
clarifies how each format expresses the same operation. {{% /notice %}}

#### Challenge:

Michael has left CompanyABC. Using the upsert block pattern from the
[previous lesson](/schema/7), write a single atomic operation that removes
Michael's `works_for` edge to CompanyABC and his `boss_of` edge to Sarah.

{{% expandable %}}

```
upsert {
  query {
    michael(func: eq(name, "Michael")) {
      michael as uid
    }
    sarah(func: eq(name, "Sarah")) {
      sarah as uid
    }
    companyabc(func: eq(name, "CompanyABC")) {
      companyabc as uid
    }
  }

  mutation {
    delete {
      uid(michael) <works_for> uid(companyabc) .
      uid(michael) <boss_of> uid(sarah) .
    }
  }
}
```

The `query` section binds each node's `uid` to a variable, and the `delete`
block removes both edges in a single transaction â€” the same upsert pattern as
the `set` block in schema/7, but with `delete` instead.

{{% /expandable %}}
