+++
date = "2017-05-01T11:55:43+10:00"
next = "/graphqlbasic/11"
prev = "/graphqlbasic/9"
title = "How Dgraph Search Works"
weight = 10
course = 2
courseName = "Basic"
type = "graphql"

+++

Dgraph graphs can be enormous, so starting a search from all nodes is
inefficient. Every search begins from a root query function.

Root query functions like `query<type>` or `get<type>` find an initial set of
nodes. This tour has mainly used `getPerson`, but `queryPerson` searches all
nodes of type `Person`.

The `@search` directive in the schema tells Dgraph to generate filter arguments
and build an index on searchable values. Without `@search` directives, Dgraph
cannot generate filter arguments or create indexes. Without an index, Dgraph
must scan all nodes of a type to find matches, degrading query performance.

From the root query's matched nodes, Dgraph follows predicates and edges to
satisfy the rest of the query. Filters inside nested blocks apply only to nodes
reached by following the listed edges.

The example query searches for all people in their 30s, then finds their friends
with `xid` equal to "bob." With a small dataset this efficiency gain is subtle,
but on a large dataset, searching only among friends of people in their 30s --
rather than all people -- makes a significant difference.
