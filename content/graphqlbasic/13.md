+++
date = "2017-05-01T11:55:46+10:00"
next = "/graphqlbasic/14"
prev = "/graphqlbasic/12"
title = "Cascade"
weight = 13
course = 2
courseName = "Basic"
type = "graphql"
+++

The `@cascade` directive removes nodes that lack all fields included in the
query. It also removes nodes where a filter inside a block returns no results.

The following query returns all of Alice's friends, regardless of pet ownership:

```
{
  getPerson(xid: "alice") {
    name
    age
    friends {
      name
      ownsPets {
        name
      }
    }
  }
}
```

With `@cascade`, friends of Alice who own no pet are excluded:

```
{
  getPerson(xid: "alice") @cascade {
    name
    age
    friends {
      name
      ownsPets {
        name
      }
    }
  }
}
```

The `has` filter argument achieves the same result more efficiently in this case.
However, `has` cannot produce the desired results in queries that filter on a
specific edge value or traverse deeper levels.

**Something to try**: Return Alice's friends that own the animal with an `xid` equal
to "goldie".

{{% expandable %}}

```
{
  getPerson(xid: "alice") {
    name
    age
    friends @cascade {
      name
      ownsPets(filter: { xid: { eq: "goldie" } }) {
        name
      }
    }
  }
}
```

{{% /expandable %}}

Placing the cascade directive at different levels applies the cascade effect
from that level downward.

Compare the responses from these three subgraphs:

```
{
  noCascade: queryPerson {
    id
    name
    age
    friends {
      id
      name
      age
    }
  }
  cascadeFriends: queryPerson {
    id
    name
    age
    friends @cascade {
      id
      name
      age
    }
  }
  cascadePeople: queryPerson @cascade {
    id
    name
    age
    friends {
      id
      name
      age
    }
  }
}
```

For more on the `@cascade` directive, see the
[Dgraph documentation](https://docs.dgraph.io/graphql/queries/cascade/).
