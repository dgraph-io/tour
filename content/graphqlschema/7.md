+++
date = "2017-04-27T23:05:53+10:00"
next = "/graphqlschema/8"
prev = "/graphqlschema/6"
title = "Deleting Data"
weight = 7
course = 3
courseName = "Schema"
type = "graphql"
+++

Dgraph's generated GraphQL API provides three ways to delete data from the
graph:

- Update a node and remove edges
- Update a node and remove predicate values
- Delete a node along with all its inbound and outbound edges and predicate values

To remove an edge from a node, use the same update mutation pattern from the
previous lesson, but replace the `set` argument with `remove`.

The following example query removes the "manages" and "manager" edges between Alice and Frank:

```
mutation {
  updatePerson(input: {
    filter: { xid: { eq: "alice" } }
    remove: { manages: [{ xid: "frank" }] }
  }) {
    person {
      xid
      manages {
        xid
      }
    }
  }
}
```

{{% notice "note" %}} The `update<type>` mutations let you set or remove
multiple edges and values in a single operation. {{% /notice %}}

The mutation above removes edges between two specific nodes. You can also remove
all edges of a given type from a node. The following mutation removes every
"manages" edge from Alice.

```
mutation {
  updatePerson(input: {
    filter: { xid: { eq: "alice" } }
    remove: { manages: null }
  })
}
```

When `@hasInverse` is applied, Dgraph keeps edge deletions balanced in both
directions, just as it does for edge creation.

Deleting predicate values uses similar syntax. Provide the value to remove
instead of listing edges. Setting the value to null removes all values for that
predicate.

```
mutation {
  updatePerson(input: {
    filter: { xid: { eq: "alice" } }
    remove: { age: null }
  }) {
    person {
      xid
      age
    }
  }
}
```

To delete a node along with all its predicate values and edges, use the
`delete<type>` mutation:

```
mutation {
  deletePerson(filter: {
    xid: "karl"
  }) {
    person {
      xid
      name
      age
    }
  }
}
```

The returned nodes represent their state before deletion, providing a final
record of that data.

{{% notice "note" %}} After deleting a node, you can reuse the xid but not the
UID through the GraphQL API, because the API does not control UID assignment.
Reusing UIDs requires bypassing the GraphQL API and mutating through other
endpoints. {{% /notice %}}
