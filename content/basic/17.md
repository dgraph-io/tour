+++
date = "2018-09-17T16:11:42+10:00"
next = "/basic/18"
prev = "/basic/16"
title = "Facets : Edge attributes"
weight = 17
course = 2
courseName = "Basic"
+++

Dgraph supports facets — key value pairs on edges — as an extension to RDF
triples. Facets describe *aspects* of a relationship by adding properties to
*edges*, instead of *nodes*. They can also be used as weights for edges.

For example, a `friend` edge can carry a boolean `close` facet to mark close
friendships.

More details about facets are in the docs: https://docs.dgraph.io/dql/query/facets

We first need to seed our dataset with facet information so the example query returns data.

### Seed sample facet data

In a terminal, navigate to the root directory where you checked out this tour and run:

```
make seed-basic-facets
```

On Windows (or if you don't have `make` installed), use Docker instead:

```
docker exec tour-seed make seed-basic-facets
```
It will output the following:

```
=== Seeding Facet Sample Data ===

This mutation adds sample data with facets (edge attributes)
for the facets lesson of the tour;

Facets allow you to store key-value pairs on edges, not just nodes.

Request: POST http://localhost:8080/mutate?commitNow=true
Content-Type: application/rdf

Payload (resources/facets.rdf):
─────────────────────────────────
{
  set {

    # -- Facets on scalar predicates
    _:alice <name> "Alice" .
    _:alice <mobile> "040123456" (since=2006-01-02T15:04:05) .
    _:alice <car> "MA0123" (since=2006-02-02T13:01:09, first=true) .

    _:bob <name> "Bob" .
    _:bob <car> "MA0134" (since=2006-02-02T13:01:09) .

    _:charlie <name> "Charlie" .
    _:dave <name> "Dave" .


    # -- Facets on UID predicates
    _:alice <friend> _:bob (close=true, relative=false) .
    _:alice <friend> _:charlie (close=false, relative=true) .
    _:alice <friend> _:dave (close=true, relative=true) .


    # -- Facets for variable propagation
    _:movie1 <name> "Movie 1" .
    _:movie2 <name> "Movie 2" .
    _:movie3 <name> "Movie 3" .

    _:alice <rated> _:movie1 (rating=3) .
    _:alice <rated> _:movie2 (rating=2) .
    _:alice <rated> _:movie3 (rating=5) .

    _:bob <rated> _:movie1 (rating=5) .
    _:bob <rated> _:movie2 (rating=5) .
    _:bob <rated> _:movie3 (rating=5) .

    _:charlie <rated> _:movie1 (rating=2) .
    _:charlie <rated> _:movie2 (rating=5) .
    _:charlie <rated> _:movie3 (rating=1) .

  }
}
─────────────────────────────────


Executing mutation...
Facets sample data seeded successfully.
```

### Run the sample query 

Run the example query now to view the facets the mutation set on the edges of the "Alice" node. 

### Adding multiple attributes to a single node

Sometimes you need two edges with distinct predicates pointing to the same node.
This pattern can be used to "explain the relationship" of nodes.

For a target node with UID `0x0f43`, set up the RDF like this:

```
_:MyNode <predicate1> <0x0f43> ( foo=bar, and=1 ) .
_:MyNode <predicate2> <0x0f43> ( bar=bar, and=2 ) .
_:MyNode <predicate3> <0x0f43> ( bar=bar, and=3 ) .
```

More examples:

```
_:MyNode <Morning> <0x0f43> ( foo=true, and=1 , since=2006-02-02T13:01:09 ) .
_:MyNode <Evening> <0x0f43> ( bar=false, and=2, since=2006-02-02T13:01:09 ) .
_:MyNode <Night>   <0x22>   ( bar=true, and=3,  since=2006-02-02T13:01:09 ) .
```

If you repeat the same predicate instead of distinct ones, each new line
overwrites the previous edge attribute. Use distinct predicates to preserve
each set of facet values.
