+++
date = "2018-09-17T16:11:42+10:00"
next = "/basic/18"
prev = "/basic/16"
title = "Facets : Edge attributes"
weight = 17
course = 2
courseName = "Basic"
+++

Dgraph supports facets — key-value pairs attached to edges. Facets store
metadata such as timestamps, booleans, and numeric values on *edges*, not
*nodes*. A `rating` facet on a `rated` edge, for example, serves as an edge
weight.

A `friend` edge, for example, can carry a boolean `close` facet that marks
whether two people share a strong bond.

For more detail, see the [facets documentation](https://docs.dgraph.io/dql/query/facets).

The sample dataset omits facets. Seed the facet data before running the example query.

### Seed sample facet data

From the tour's root directory, run:

```
make seed-basic-facets
```

If `make` is unavailable, use Docker instead:

```
docker exec tour-seed make seed-basic-facets
```
The command outputs:

```
=== Seeding Facet Sample Data ===

This mutation adds sample data with facets (edge attributes)
for the facets lesson of the tour;

Facets allow you to store key-value pairs on edges, not just nodes.

Request: POST http://localhost:8080/mutate?commitNow=true
Content-Type: application/rdf

Payload (resources/facets.rdf):
─────────────────────────────────
{
  set {

    # -- Facets on scalar predicates
    _:alice <name> "Alice" .
    _:alice <mobile> "040123456" (since=2006-01-02T15:04:05) .
    _:alice <car> "MA0123" (since=2006-02-02T13:01:09, first=true) .

    _:bob <name> "Bob" .
    _:bob <car> "MA0134" (since=2006-02-02T13:01:09) .

    _:charlie <name> "Charlie" .
    _:dave <name> "Dave" .


    # -- Facets on UID predicates
    _:alice <friend> _:bob (close=true, relative=false) .
    _:alice <friend> _:charlie (close=false, relative=true) .
    _:alice <friend> _:dave (close=true, relative=true) .


    # -- Facets for variable propagation
    _:movie1 <name> "Movie 1" .
    _:movie2 <name> "Movie 2" .
    _:movie3 <name> "Movie 3" .

    _:alice <rated> _:movie1 (rating=3) .
    _:alice <rated> _:movie2 (rating=2) .
    _:alice <rated> _:movie3 (rating=5) .

    _:bob <rated> _:movie1 (rating=5) .
    _:bob <rated> _:movie2 (rating=5) .
    _:bob <rated> _:movie3 (rating=5) .

    _:charlie <rated> _:movie1 (rating=2) .
    _:charlie <rated> _:movie2 (rating=5) .
    _:charlie <rated> _:movie3 (rating=1) .

  }
}
─────────────────────────────────


Executing mutation...
Facets sample data seeded successfully.
```

### Run the sample query 

Run the example query to view the facets on Alice's edges.

### Adding multiple attributes to a single node

Multiple predicates can point to the same target node; each predicate carries
its own facets.

For a target node with UID `0x0f43`, structure the RDF triples like this:

```
_:MyNode <predicate1> <0x0f43> ( foo=bar, and=1 ) .
_:MyNode <predicate2> <0x0f43> ( bar=bar, and=2 ) .
_:MyNode <predicate3> <0x0f43> ( bar=bar, and=3 ) .
```

The same pattern works with richer facets:

```
_:MyNode <Morning> <0x0f43> ( foo=true, and=1 , since=2006-02-02T13:01:09 ) .
_:MyNode <Evening> <0x0f43> ( bar=false, and=2, since=2006-02-02T13:01:09 ) .
_:MyNode <Night>   <0x22>   ( bar=true, and=3,  since=2006-02-02T13:01:09 ) .
```

Repeating the same predicate overwrites the previous facets. Use distinct
predicates to preserve each set of facet values.
