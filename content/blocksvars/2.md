+++
date = "2017-05-01T20:46:58+10:00"
next = "/blocksvars/3"
prev = "/blocksvars/1"
title = "Query Variables"
weight = 2
course = 5
courseName = "Var Blocks"
+++

Results can be stored in variables and used elsewhere in the query.

Variables are declared by

```
var_name as some_block { ... }
```

where `var_name` is any distinct variable name and `some_block` is either a
whole query or an internal block of a query matching on an edge.

Once defined, variables can be used in:

- the same query in a child of the defining block (not a parent of the
  definition)
- in another query

Here's an illustration of variable scoping:

```
{
  A as some_query(...) {
    B as some_edge @filter(...) { # can't use B or C in this filter
      C as ... {
        # A, B and C can be used here
      }

      # A, B and C can be used here
    }

    # A, B and C can be used in any blocks at this level
  }

  # A, B and C can be used in any other query block
}
```

Variables don't affect the semantics of the query at the point they are defined.

Query variables are used by `uid(<variable-name>)`. Variables evaluate to all
UIDs matched by the block they are defined against. Variables are UID lists, not
the graph matched by the block, and each variable evaluates to all UIDs the
block matches across the whole query, not the UIDs matched by any single branch.

It is an error to define a variable but not use it.

The following pages cover each type of query variable.
